<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Publication - Cell Taxonomy - CNCB-NGDC</title>
    <link rel="stylesheet" href="/celltaxonomy/static/css/demo.css" type="text/css">
    <link rel="icon" href="/celltaxonomy/static/img/CellTaxonomy v3.png">

    <link rel="stylesheet" href="/celltaxonomy/static/css/ionicons.min.css">

    <link rel="stylesheet" href="/celltaxonomy/static/css/zTreeStyle/zTreeStyle.css" type="text/css">
    <script src="/celltaxonomy/static/js/jquery.min.js"></script>
    <!-- 最新版本的 Bootstrap 核心 CSS 文件 -->

    <link rel="stylesheet" href="/celltaxonomy/static/css/bootstrap.min.css" >
    <link rel="stylesheet" href="/celltaxonomy/static/css/dataTables.bootstrap.min.css" >

    <script src="/celltaxonomy/static/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/celltaxonomy/static/js/jquery.ztree.core.min.js"></script>
    <script type="text/javascript" src="/celltaxonomy/static/js/jquery.ztree.exhide.js"></script>
    <script type="text/javascript" src="/celltaxonomy/static/js/fuzzysearch.js"></script>
    <script src="/celltaxonomy/static/js/plotly-latest.min.js"></script>
    <script type="text/javascript" src="/celltaxonomy/static/js/headerfooter-full.js"></script>
    <script src="/celltaxonomy/static/js/jquery.dataTables.min.js"></script>
    <link rel="stylesheet"  href="/celltaxonomy/static/css/buttons.bootstrap.min.css">
    <script src="/celltaxonomy/static/js/dataTables.buttons.min.js"></script>
    <script src="/celltaxonomy/static/js/jszip.min.js"></script>
    <script src="/celltaxonomy/static/js/buttons.html5.min.js"></script>
    <script src="/celltaxonomy/static/js/buttons.bootstrap.min.js"></script>

    <script src="/celltaxonomy/static/js/dataTables.bootstrap.min.js"></script>
    <link href="/celltaxonomy/static/css/bow.ui.min.css" rel="stylesheet">
    <link href="/celltaxonomy/static/css/nouislider.min.css" rel="stylesheet">
    <script src="/celltaxonomy/static/js/nouislider.js"></script>
    <script type="text/javascript" src="/celltaxonomy/static/js/echarts.min.js"></script>
    <script type="text/javascript" src="/celltaxonomy/static/js/wNumb.js"></script>
    <link rel="stylesheet" type="text/css" href="/celltaxonomy/static/css/my/my.css">

    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?6b352b313257516a97fd9d0db0276208";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
</head>
<style>
    #pmid-table_filter{
        background: white;
        padding:10px 15px;
        border-radius: 5px;
    }
    .browse_title{
        line-height: 30px;
        padding-left: 5px;
        font-size: 20px;
        font-weight: 700;
        font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif;
    }
    .pagination>.active>a,
    .pagination>.active>a:hover,
    .pagination>.active>a:focus,
    .pagination>.active>span,
    .pagination>.active>span:focus,
    .pagination>.active>span:hover{
        color:black;
        border:none !important;
        box-shadow: none;
        outline:none;
        text-decoration: underline;
        font-weight: 600;
        background: #f4f7f6;
    }
    .pagination>li>a,.pagination>.disabled>a,.pagination>.disabled>a:hover{
        background: transparent;
    }

    .pagination>li>a,
    .pagination>li>a:focus,
    .pagination>li>a:hover
    {
        border:none;
        color: black;
        box-shadow: none;
        outline:none;

    }
    .pagination>li>a:focus,
    .pagination>li>a:hover
    {
        background: #f4f7f6;
    }
    .table>tbody>tr>td{
        vertical-align: middle;
    }
    table.dataTable thead .sorting_desc::after,
    table.dataTable thead .sorting_asc::after,
    table.dataTable thead .sorting::after{
        opacity: 0.5;
        content: "";
    }

    .table-hover>tbody>tr:hover{
        background-color:#f4f7f6;
    }
    #pmid-table>tbody>tr>td,.table>thead>tr>th{
        vertical-align: middle;
        background: white;
        border-bottom: 3px solid #f4f7f6;
    }

    #pmid-table>tbody>tr>td:first-child{
        border-bottom-left-radius: 5px;
        border-top-left-radius: 5px;
    }
    #pmid-table>tbody>tr>td:last-child{
        border-bottom-right-radius: 5px;
        border-top-right-radius: 5px;
    }
    #slider{
        height: 10px;
        margin:0 auto;
    }

    #slider .noUi-connect {
        background: #5599c4;
        box-shadow: none;
    }
    #celltype_slider .noUi-connect {
        background: #2487ce;
        box-shadow: none;
    }
    [disabled] .noUi-connect, [disabled].noUi-connect {
        background: #B8B8B8 !important;
    }
    #marker_slider .noUi-connect {
        background: #df6c4f;
        box-shadow: none;
    }


    .slider-styled{
        margin-top:10px
    }

    .noUi-target,.noUi-background{
        border:none;
        background: white;
        box-shadow: none;

    }
    .noUi-base{
        height:2px;
        margin-top:3px
    }
    .noUi-handle {
        height: 18px !important;
        width: 18px !important;
        top: -8px !important;
        left: -9px !important; /* half the width */
        border-radius: 9px;
    }
    .noUi-tooltip{
        bottom:-32px;
        background: transparent;
        border:none;
        left:-13px;
    }
    .noUi-horizontal .noUi-handle-lower .noUi-tooltip{
        top:17px
    }
    .noUi-handle:after, .noUi-handle:before{
        content:none;
    }
    #histogram{
        margin-bottom: 10px;
    }
    #histogram .bar-group.selected .bar{
        fill: url("#selected-gradient");
        opacity: 1;
    }
    #histogram .bar-group .bar{
        fill:#d9d9d9;

    }
    #histogram svg{
        width:100%
    }
    .filter_card{
        margin-bottom: 40px;
    }
    #button{
        background: #16507B;
        border:none;
        color:white
    }
    #button:hover{
        color:white !important;
    }
    #pmid-table thead tr th{
        font-size: 15px;
        font-family: -apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Oxygen,Ubuntu,Cantarell,"Fira Sans","Droid Sans","Helvetica Neue",sans-serif;
    }
</style>
<body>
    <nav th:replace="common/topbar::topbar"></nav>
    <div class="container" style="background: #f4f7f6">
        <div class="row">
            <nav aria-label="breadcrumb">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="/celltaxonomy/">Home</a></li>
                    <li class="breadcrumb-item active">Browse</li>
                    <li class="breadcrumb-item active" aria-current="page">Publications</li>
                    <li class="breadcrumb-item" id="bread_name" style="display: none"></li>
                </ol>
            </nav>
            <div class="mypanel" style="padding:0 20px">
                <div class="mypanel-body" style="padding: 20px;background: transparent">
                    <div id="pub_browse" style="margin-top: 20px">
                        <div class="col-lg-2" style="padding:15px 30px;background: white;border-radius: 5px">
                            <div class="filter_card">
                                <label>FILTER BY YEAR</label>
                                <div id="histogram">
                                    <svg id="svg" xmlns="http://www.w3.org/2000/svg">
                                        <defs>
                                            <lineargradient id="selected-gradient" gradientunits="userSpaceOnUse" x1="0" y1="0" x2="0" y2="100%">
                                                <stop offset="0" stop-color="black"></stop>
                                                <stop offset="0.6" stop-color="#315870"></stop>
                                                <stop offset="1" stop-color="#5599c4"></stop>
                                            </lineargradient>
                                        </defs>
                                    </svg>
                                </div>
                                <div id="slider" class="slider-styled">

                                </div>
                            </div>
<!--                            <div class="filter_card">-->
<!--                                <label>FILTER BY CITATION</label>-->
<!--                                <div id="citation_slider" class="slider-styled">-->

<!--                                </div>-->
<!--                            </div>-->
<!--                            <div class="filter_card">-->
<!--                                <label>FILTER BY #CELL TYPEs</label>-->
<!--                                <div id="celltype_slider" class="slider-styled">-->

<!--                                </div>-->
<!--                            </div>-->
<!--                            <div class="filter_card">-->
<!--                                <label>FILTER BY #MARKERs</label>-->
<!--                                <div id="marker_slider" class="slider-styled">-->

<!--                                </div>-->
<!--                            </div>-->
                            <div>
                                <a id="reset" style="display: block;color: white;background: #16507B;border-radius: 5px;text-align: center;padding:10px">RESET</a>
                            </div>
                        </div>
                        <div class="col-lg-10">
                            <div style="padding-left: 20px">
                                <table id="pmid-table" class="table table-hover" style="width: 100%;" >
                                    <thead>
                                    <tr>
                                        <th>Publication</th>
                                        <th>#Cell types</th>
                                        <th>#Cell markers</th>
                                        <th>Year</th>
<!--                                        <th>-->
<!--                                            Citation-->
<!--                                            <div class="wrapper" style="height: 18px">-->
<!--                                                <i class="icon ion-help-circled" style="line-height: 8px"></i>-->
<!--                                                <span class="tooltiptext" style="display: block;white-space: normal">-->
<!--                                            Source: Europe PMC-->
<!--                                        </span>-->
<!--                                            </div>-->
<!--                                        </th>-->
                                    </tr>

                                    </thead>
                                    <tbody>

                                    </tbody>
                                </table>
                            </div>
                        </div>


                    </div>
                    <div id="detail_browse" style="display: none;margin-top: 20px">
                        <button id="button" class="btn" style="margin-bottom: 20px">
                            <i class="icon ion-arrow-left-a"></i>
                            <span>Back</span>
                        </button>
                        <table id="detail-table" class="table table-hover table-striped" style="width: 100%" >
                            <thead>
                            <tr>
                                <th>PMID</th>
                                <th>Species</th>
                                <th>Cell type</th>
                                <th>Cell Taxonomy ID</th>
                                <th>Cell marker</th>
                                <th>ENTREZID</th>
                            </tr>

                            </thead>
                            <tbody>
                            <tr>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                                <td></td>
                            </tr>
                            </tbody>
                        </table>
                    </div >
                </div>
            </div>
        </div>
    </div>


    <script>
        var result;
        $.ajax({
            url:'/celltaxonomy/pub_browse',
            type:'post',
            success:function(results){
                result=results
                $("#pmid-table").DataTable({
                    data:results,
                    columns:[
                        {
                            data:"PMID",
                            render:function(data,type,row){
                                if(type=="display"){
                                    return "<div>" +
                                        "<a class='main_item' target='_blank' href='https://pubmed.ncbi.nlm.nih.gov/"+row.PMID+"'>"+row.title+"</a>"+
                                        "<div class='sub_item'><span >PMID: </span><a target='_blank' class='sub_content' href='https://pubmed.ncbi.nlm.nih.gov/"+row.PMID+"' class='geneentrezid'>"+row.PMID+"</a></div>"+
                                        "<div class='sub_item'><span >Journal: </span><span>"+row.journalvolume+"</span></div>"+
                                        "</div>"
                                }
                                if(type=="filter"){
                                    return row.title+data
                                }
                                else{
                                    return row.title
                                }

                                // return "<a target='_blank' href='https://pubmed.ncbi.nlm.nih.gov/"+row.PMID+"/'>"+row.PMID+"</a>"
                            }
                        },
                        {
                            data:"cell_num",
                            render:function(data,type,row){
                                return "<a class='detail'>"+row.cell_num+"</a>"
                            }
                        },
                        {
                            data:"marker_num",
                            render:function(data,type,row){
                                return "<a class='detail'>"+row.marker_num+"</a>"
                            }
                        },
                        {data:"pubYear"},
                        // {data:"citations"},
                    ],
                    destroy:true,
                    order:[2,"desc"],
                    "iDisplayLength":5,
                    dom: '<"row"<"col-lg-12"f>>t<"row"<"col-lg-6"i><"col-lg-6"p>>'
                })
                var max_count=Math.max.apply(Math,results.map(function(j){
                    return j.citations
                }))
                var min_count=Math.min.apply(Math,results.map(function(j){
                    return j.citations
                }))

                var max_count2=Math.max.apply(Math,results.map(function(j){
                    return j.cell_num
                }))
                var min_count2=Math.min.apply(Math,results.map(function(j){
                    return j.cell_num
                }))

                var max_count3=Math.max.apply(Math,results.map(function(j){
                    return j.marker_num
                }))
                var min_count3=Math.min.apply(Math,results.map(function(j){
                    return j.marker_num
                }))

                var handlesSlider = document.getElementById('citation_slider');
                var slider=noUiSlider.create(handlesSlider, {
                    start: [min_count, max_count],
                    connect: true,
                    tooltips: true,
                    step:1,
                    format:wNumb({
                        decimals:0
                    }),
                    range: {
                        'min': [min_count],
                        'max': [max_count]
                    }
                });

                var handlesSlider2 = document.getElementById('celltype_slider');
                var slider2=noUiSlider.create(handlesSlider2, {
                    start: [min_count2, max_count2],
                    connect: true,
                    tooltips: true,
                    step:1,
                    format:wNumb({
                        decimals:0
                    }),
                    range: {
                        'min': [min_count2],
                        'max': [max_count2]
                    }
                });



                var handlesSlider3 = document.getElementById('marker_slider');
                var slider3=noUiSlider.create(handlesSlider3, {
                    start: [min_count3, max_count3],
                    connect: true,
                    tooltips: true,
                    step:1,
                    format:wNumb({
                        decimals:0
                    }),
                    range: {
                        'min': [min_count3],
                        'max': [max_count3]
                    }
                });

                slider.on('change',function(){
                    $("#celltype_slider").attr("disabled",true)
                    $("#slider").attr("disabled",true)
                    $("#marker_slider").attr("disabled",true)

                    var range=slider.get()
                    var filter_results=result.filter(function(a){
                        return a.citations<=range[1] && a.citations>=range[0]
                    })
                    $("#pmid-table").DataTable({
                        data:filter_results,
                        columns:[
                            {
                                data:"PMID",
                                render:function(data,type,row){
                                    if(type=="display"){
                                        return "<div>" +
                                            "<a class='main_item' target='_blank' href='https://pubmed.ncbi.nlm.nih.gov/"+row.PMID+"'>"+row.title+"</a>"+
                                            "<div class='sub_item'><span >PMID: </span><a target='_blank' class='sub_content' href='https://pubmed.ncbi.nlm.nih.gov/"+row.PMID+"' class='geneentrezid'>"+row.PMID+"</a></div>"+
                                            "<div class='sub_item'><span >Journal: </span><span>"+row.journalvolume+"</span></div>"+
                                            "</div>"
                                    }
                                    else{
                                        return row.title
                                    }

                                    // return "<a target='_blank' href='https://pubmed.ncbi.nlm.nih.gov/"+row.PMID+"/'>"+row.PMID+"</a>"
                                }
                            },
                            {
                                data:"cell_num",
                                render:function(data,type,row){
                                    return "<a class='detail'>"+row.cell_num+"</a>"
                                }
                            },
                            {
                                data:"marker_num",
                                render:function(data,type,row){
                                    return "<a class='detail'>"+row.marker_num+"</a>"
                                }
                            },
                            {data:"pubYear"},
                            // {data:"citations"},
                        ],
                        destroy:true,
                        order:[2,"desc"],
                        "iDisplayLength":5,
                        dom: '<"row"<"col-lg-12"f>>t<"row"<"col-lg-6"i><"col-lg-6"p>>'
                    })

                })
                slider2.on('change',function(){
                    $("#slider").attr("disabled",true)
                    $("#citation_slider").attr("disabled",true)
                    $("#marker_slider").attr("disabled",true)

                    var range=slider2.get()
                    var filter_results=result.filter(function(a){
                        return a.cell_num<=range[1] && a.cell_num>=range[0]
                    })
                    $("#pmid-table").DataTable({
                        data:filter_results,
                        columns:[
                            {
                                data:"PMID",
                                render:function(data,type,row){
                                    if(type=="display"){
                                        return "<div>" +
                                            "<a class='main_item' target='_blank' href='https://pubmed.ncbi.nlm.nih.gov/"+row.PMID+"'>"+row.title+"</a>"+
                                            "<div class='sub_item'><span >PMID: </span><a target='_blank' class='sub_content' href='https://pubmed.ncbi.nlm.nih.gov/"+row.PMID+"' class='geneentrezid'>"+row.PMID+"</a></div>"+
                                            "<div class='sub_item'><span >Journal: </span><span>"+row.journalvolume+"</span></div>"+
                                            "</div>"
                                    }
                                    else{
                                        return row.title
                                    }

                                    // return "<a target='_blank' href='https://pubmed.ncbi.nlm.nih.gov/"+row.PMID+"/'>"+row.PMID+"</a>"
                                }
                            },
                            {
                                data:"cell_num",
                                render:function(data,type,row){
                                    return "<a class='detail'>"+row.cell_num+"</a>"
                                }
                            },
                            {
                                data:"marker_num",
                                render:function(data,type,row){
                                    return "<a class='detail'>"+row.marker_num+"</a>"
                                }
                            },
                            {data:"pubYear"},
                            // {data:"citations"},
                        ],
                        destroy:true,
                        order:[2,"desc"],
                        "iDisplayLength":5,
                        dom: '<"row"<"col-lg-12"f>>t<"row"<"col-lg-6"i><"col-lg-6"p>>'
                    })

                })
                slider3.on('change',function(){
                    $("#celltype_slider").attr("disabled",true)
                    $("#citation_slider").attr("disabled",true)
                    $("#slider").attr("disabled",true)

                    var range=slider3.get()
                    var filter_results=result.filter(function(a){
                        return a.marker_num<=range[1] && a.marker_num>=range[0]
                    })
                    $("#pmid-table").DataTable({
                        data:filter_results,
                        columns:[
                            {
                                data:"PMID",
                                render:function(data,type,row){
                                    if(type=="display"){
                                        return "<div>" +
                                            "<a class='main_item' target='_blank' href='https://pubmed.ncbi.nlm.nih.gov/"+row.PMID+"'>"+row.title+"</a>"+
                                            "<div class='sub_item'><span >PMID: </span><a target='_blank' class='sub_content' href='https://pubmed.ncbi.nlm.nih.gov/"+row.PMID+"' class='geneentrezid'>"+row.PMID+"</a></div>"+
                                            "<div class='sub_item'><span >Journal: </span><span>"+row.journalvolume+"</span></div>"+
                                            "</div>"
                                    }
                                    else{
                                        return row.title
                                    }

                                    // return "<a target='_blank' href='https://pubmed.ncbi.nlm.nih.gov/"+row.PMID+"/'>"+row.PMID+"</a>"
                                }
                            },
                            {
                                data:"cell_num",
                                render:function(data,type,row){
                                    return "<a class='detail'>"+row.cell_num+"</a>"
                                }
                            },
                            {
                                data:"marker_num",
                                render:function(data,type,row){
                                    return "<a class='detail'>"+row.marker_num+"</a>"
                                }
                            },
                            {data:"pubYear"},
                            // {data:"citations"},
                        ],
                        destroy:true,
                        order:[2,"desc"],
                        "iDisplayLength":5,
                        dom: '<"row"<"col-lg-12"f>>t<"row"<"col-lg-6"i><"col-lg-6"p>>'
                    })

                })

            }
        });
        $.ajax({
            url:'/celltaxonomy/pub_year',
            type:'post',
            success:function(results){
                var handlesSlider = document.getElementById('slider');
                var slider=noUiSlider.create(handlesSlider, {
                    start: [parseInt(results[1].pubYear), parseInt(results[results.length-1].pubYear)],
                    connect: true,
                    tooltips: true,
                    step:1,
                    format:wNumb({
                        decimals:0
                    }),
                    range: {
                        'min': [parseInt(results[1].pubYear)],
                        'max': [parseInt(results[results.length-1].pubYear)]
                    }
                });

                var n=0;
                var len=parseInt(results[results.length-1].pubYear)-parseInt(results[1].pubYear)+1
                var max_count=Math.max.apply(Math,results.map(function(j){
                    return j.counts
                }))
                results.map(function(a){
                    $("#histogram svg").append(
                        "<g class=\"bar-group selected\" data-bar-index=\""+n+"\">" +
                        // "<rect class=\"bar-bg\" x=\""+parseFloat(n)/len*100+"\" y=\"0\" width=\""+1/parseFloat(len)*100+"%\" height=\"100%\"></rect>" +
                        "<rect class=\"bar\" x=\""+parseFloat(n)/len*100+"%\" y=\""+(1-parseFloat(a.counts)/max_count)*100+"%\" width=\""+1/parseFloat(len)*100+"%\" height=\""+parseFloat(a.counts)/max_count*100+"%\"></rect>" +
                        "</g>"
                    )
                    n=n+1
                })
                $("#histogram").html($("#histogram").html())
                $("#slider").css("width",((1-1/parseFloat(n))*100).toString()+"%")
                slider.on("change",function(){
                    $("#celltype_slider").attr("disabled",true)
                    $("#citation_slider").attr("disabled",true)
                    $("#marker_slider").attr("disabled",true)
                    var range=slider.get()
                    var matching2 = $("#histogram svg .bar-group").filter(function(){
                        return  $(this).attr("data-bar-index")>=range[0]-results[1].pubYear && $(this).attr("data-bar-index")<=range[1]-results[1].pubYear
                    })

                    $("#histogram svg .bar-group").removeClass("selected")
                    matching2.addClass("selected")

                    var filter_results=result.filter(function(a){
                        return a.pubYear<=range[1] && a.pubYear>=range[0]
                    })

                    $("#pmid-table").DataTable({
                        data:filter_results,
                        columns:[
                            {
                                data:"PMID",
                                render:function(data,type,row){
                                    if(type=="display"){
                                        return "<div>" +
                                            "<a class='main_item' target='_blank' href='https://pubmed.ncbi.nlm.nih.gov/"+row.PMID+"'>"+row.title+"</a>"+
                                            "<div class='sub_item'><span >PMID: </span><a target='_blank' class='sub_content' href='https://pubmed.ncbi.nlm.nih.gov/"+row.PMID+"' class='geneentrezid'>"+row.PMID+"</a></div>"+
                                            "<div class='sub_item'><span >Journal: </span><span>"+row.journalvolume+"</span></div>"+
                                            "</div>"
                                    }
                                    else{
                                        return row.title
                                    }

                                    // return "<a target='_blank' href='https://pubmed.ncbi.nlm.nih.gov/"+row.PMID+"/'>"+row.PMID+"</a>"
                                }
                            },
                            {
                                data:"cell_num",
                                render:function(data,type,row){
                                    return "<a class='detail'>"+row.cell_num+"</a>"
                                }
                            },
                            {
                                data:"marker_num",
                                render:function(data,type,row){
                                    return "<a class='detail'>"+row.marker_num+"</a>"
                                }
                            },
                            {data:"pubYear"},
                            // {data:"citations"},
                        ],
                        destroy:true,
                        order:[2,"desc"],
                        "iDisplayLength":5,
                        dom: '<"row"<"col-lg-12"f>>t<"row"<"col-lg-6"i><"col-lg-6"p>>'
                    })

                })

            }
        });

        $("#pmid-table").on("click",".detail",function(){
            var row = $(this).closest("tr");
            var data = $('#pmid-table').DataTable().row(row).data();
            var pmid=data["PMID"];
            $("#pub_browse").css("display","none");
            $("#detail_browse").css("display","block");

            $("#bread_name").css("display","inline-block")
            $("#bread_name").text(pmid)
            $("#bread_name").prev().removeClass("active")
            $("#bread_name").prev().html("<a href='/celltaxonomy/publication'>Publications</a>")
            $("#bread_name").addClass("active")

            $.ajax({
                url:'/celltaxonomy/detail_browse',
                type:'post',
                data:{"pmid":pmid},
                success:function(results){
                    $("#detail-table").DataTable({
                        data:results,
                        columns:[
                            {
                                data:"PMID",
                                render:function(data,type,row){
                                    return "<a target='_blank' href='https://pubmed.ncbi.nlm.nih.gov/"+row.PMID+"/'>"+row.PMID+"</a>"
                                }
                            },
                            {data:"Species"},
                            {
                                data:"Cell_standard",
                                render:function(data,type,row){
                                    return "<a target='_blank' href='/celltaxonomy/celltype/"+row.CT_ID+"'>"+row.Cell_standard+"</a>"
                                }
                            },
                            {
                                data:"CT_ID",
                                render:function(data,type,row){
                                    return "<a target='_blank' href='/celltaxonomy/celltype/"+row.CT_ID+"'>"+row.CT_ID+"</a>"
                                }
                            },
                            {
                                data:"Cell_Marker",
                                render:function(data,type,row){
                                    return "<a target='_blank' href='/celltaxonomy/marker/"+row.Gene_ENTREZID2+"'>"+row.Cell_Marker+"</a>"
                                }
                            },
                            {
                                data:"Gene_ENTREZID",
                                render:function(data,type,row){
                                    if(row.Gene_ENTREZID!="NA"){
                                        return "<a target='_blank' href='https://www.ncbi.nlm.nih.gov/gene/"+row.Gene_ENTREZID+"' class='geneentrezid'>"+row.Gene_ENTREZID+"</a>"
                                    }
                                    else{
                                        return row.Gene_ENTREZID
                                    }
                                }
                            }
                        ],
                        destroy:true,
                        dom: '<"row"<"col-lg-6"l><"col-lg-6"f>>t<"row"<"col-lg-6"i><"col-lg-6"p>>',

                    })
                }
            });

        })
        $("#button").click(function(){
            $("#detail_browse").css("display","none");
            $("#pub_browse").css("display","block");

            $("#bread_name").css("display","none")
            $("#bread_name").prev().addClass("active")
            $("#bread_name").prev().html("Publications")


        });
        function post(URL,params) {
            var temp_form = document.createElement("form");
            temp_form .action = "/celltaxonomy"+URL;
            temp_form .target = "_blank";
            temp_form .method = "post";
            temp_form .style.display = "none";
            for (var x in params){
                var opt = document.createElement("textarea");
                opt.name = x;
                opt.value = params[x];
                temp_form .appendChild(opt);
            }


            document.body.appendChild(temp_form);
            temp_form .submit();
        };
        $("#reset").click(function(){
            $("#slider").removeAttr("disabled")
            $("#citation_slider").removeAttr("disabled")
            $("#celltype_slider").removeAttr("disabled")
            $("#marker_slider").removeAttr("disabled")
            var slider = document.getElementById('slider')
            // var slider1 = document.getElementById('citation_slider')
            // var slider2 = document.getElementById('celltype_slider')
            // var slider3 = document.getElementById('marker_slider')

            slider.noUiSlider.set([-1,999999])
            // slider1.noUiSlider.set([-1,999999])
            // slider2.noUiSlider.set([-1,999999])
            // slider3.noUiSlider.set([-1,999999])


            $("#svg .bar-group").removeClass("selected")
            $("#svg .bar-group").addClass("selected")
            $("#pmid-table").DataTable({
                data:result,
                columns:[
                    {
                        data:"PMID",
                        render:function(data,type,row){
                            if(type=="display"){
                                return "<div>" +
                                    "<a class='main_item' target='_blank' href='https://pubmed.ncbi.nlm.nih.gov/"+row.PMID+"'>"+row.title+"</a>"+
                                    "<div class='sub_item'><span >PMID: </span><a target='_blank' class='sub_content' href='https://pubmed.ncbi.nlm.nih.gov/"+row.PMID+"' class='geneentrezid'>"+row.PMID+"</a></div>"+
                                    "<div class='sub_item'><span >Journal: </span><span>"+row.journalvolume+"</span></div>"+
                                    "</div>"
                            }
                            else{
                                return row.title
                            }

                            // return "<a target='_blank' href='https://pubmed.ncbi.nlm.nih.gov/"+row.PMID+"/'>"+row.PMID+"</a>"
                        }
                    },
                    {
                        data:"cell_num",
                        render:function(data,type,row){
                            return "<a class='detail'>"+row.cell_num+"</a>"
                        }
                    },
                    {
                        data:"marker_num",
                        render:function(data,type,row){
                            return "<a class='detail'>"+row.marker_num+"</a>"
                        }
                    },
                    {data:"pubYear"},
                    // {data:"citations"},
                ],
                destroy:true,
                "iDisplayLength":5,
                order:[2,"desc"],
                dom: '<"row"<"col-lg-12"f>>t<"row"<"col-lg-6"i><"col-lg-6"p>>'
            })

        })
    </script>
</body>
</html>