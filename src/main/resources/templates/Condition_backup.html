<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Conditions - Cell Taxonomy - CNCB-NGDC</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">    <link rel="stylesheet" href="/celltaxonomy/static/css/demo.css" type="text/css">
    <link rel="icon" href="/celltaxonomy/static/img/CellTaxonomy v3.png">

    <link rel="stylesheet" href="/celltaxonomy/static/css/ionicons.min.css">

    <script src="/celltaxonomy/static/js/jquery.min.js"></script>
    <script src="/celltaxonomy/static/js/plotly-latest.min.js"></script>
    <link rel="stylesheet" href="/celltaxonomy/static/css/bootstrap.min.css" >
    <link rel="stylesheet" href="/celltaxonomy/static/css/dataTables.bootstrap.min.css" >
    <script src="/celltaxonomy/static/js/jquery.dataTables.min.js"></script>
    <script src="/celltaxonomy/static/js/dataTables.buttons.min.js"></script>
    <script src="/celltaxonomy/static/js/jszip.min.js"></script>
    <script src="/celltaxonomy/static/js/buttons.html5.min.js"></script>
    <script src="/celltaxonomy/static/js/buttons.bootstrap.min.js"></script>

    <script src="/celltaxonomy/static/js/dataTables.bootstrap.min.js"></script>

    <link href=" /celltaxonomy/static/css/dataTables.colVis.css" rel="stylesheet">
    <link href="/celltaxonomy/static/css/select2.min.css" rel="stylesheet" />
    <script src="/celltaxonomy/static/js/select2.min.js"></script>
    <link href="/celltaxonomy/static/css/bow.ui.min.css" rel="stylesheet">
    <script type="text/javascript" src="/celltaxonomy/static/js/headerfooter-full.js"></script>

    <link rel="stylesheet" type="text/css" href="/celltaxonomy/static/css/my/my.css">
</head>
<style>
    .Browser::-webkit-scrollbar,.table-region::-webkit-scrollbar {
        /*滚动条整体样式*/
        width : 15px;  /*高宽分别对应横竖滚动条的尺寸*/
        height: 12px;
    }
    .Browser::-webkit-scrollbar-thumb,.table-region::-webkit-scrollbar-thumb{
        /*滚动条里面小方块*/
        border-radius   : 10px;
        background-color: #2487ce;
        background-image: -webkit-linear-gradient(
                45deg,
                rgba(255, 255, 255, 0.2) 25%,
                transparent 25%,
                transparent 50%,
                rgba(255, 255, 255, 0.2) 50%,
                rgba(255, 255, 255, 0.2) 75%,
                transparent 75%,
                transparent
        );
    }
    .Browser::-webkit-scrollbar-track,.table-region::-webkit-scrollbar-track {
        /*滚动条里面轨道*/
        box-shadow   : 0 0 1px rgba(0, 0, 0, 0.2);
        background   : #ededed;
        border-radius: 10px;
    }
    .indexes,.tissue-indexes{
        display: flex;
        padding: 10px;
        width: 100%;
        justify-content: center;
        margin:0 auto;
    }
    .index,.tissue-index{
        display: inline-block;
        padding:0 1.35% 0 1.35%;
        font-size: 17px;
        border-bottom: 1px solid #ddd;
    }
    .index.active,.tissue-index.active{

        border: 1px solid #ddd;
        border-bottom-color: transparent;
        border-radius: 4px 4px 0 0;
    }
    .index a,.pagenumber a,.tissue-index a{
        color:#333;
        text-decoration: none;
    }
    .filter-content{
        display: inline-block;
        padding:0 15px 0 15px;
        font-size: 15px;
        text-transform: capitalize;
        width: 33%;
        cursor: pointer;
    }
    .filter-content:hover{
        background: #f1f1f1;
    }
    .filter-content.active{
        background: #f1f1f1;

    }
    .content{
        display: block;
    }
    .content>i{
        cursor: pointer;
    }
    textarea{
        margin:0 !important
    }
    .select2-selection__rendered{
        margin:0 !important
    }
    .select2 {
        width: 90% !important;
    }
    @media (min-width: 992px) {

    }
    .condition{
        padding: 5px;
    }
    .condition.active{
        background: #2487ce;
        color: white;
    }
</style>
<body>
<header>
    <nav th:replace="common/topbar::topbar"></nav>
</header>

<!--    <div style="overflow: hidden;height:150px;width: 100%;background-image: url(/celltaxonomy/static/img/B1415360227.jpeg)">-->
<!--        <div class="col-lg-offset-1" style="display: flex;align-items: center;height: 100%;">-->
<!--            <h1 style="text-align: left;color: white;width:100%;font-size: 76px">Marker Browser</h1>-->
<!--        </div>-->
<!--    </div>-->
<div class="container" style="background: #F3F4F9;" >
    <div class="row" >
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/celltaxonomy">Home</a></li>
                <li class="breadcrumb-item active" aria-current="page">Condition</li>
            </ol>
        </nav>
        <div class="col-lg-12 col-sm-12" style="margin-top: 30px;">
            <div class="panel-default">
                <div class="panel-body" style="padding-right: 0">
                    <table class="table" style="table-layout: fixed">
                        <tr>
                            <td style="width: 100px">
                                <h4 class="filter-title" style="margin-top: 10px" id="condition" >Condition</h4>
                            </td>
                            <td colspan="4">
                                <ul id="diseasename" style="margin:0"></ul>
                            </td>
                            <td>
                                <button class="btn btn-primary" id="show">More</button>
                            </td>
                        </tr>
                        <tr>
                            <td >
                                <h4 class="filter-title" style="margin-top: 10px" id="cell_type" >Cell type</h4>
                            </td>
                            <td >
                                <select class="js-example-basic-multiple" multiple="multiple" id="celltypename"></select>
                            </td>


                        </tr>
                        <tr>
                            <td>
                                <h4 class="filter-title" style="margin-top: 10px" id="tissue">Tissue</h4>
                            </td>
                            <td>
                                <select class="js-example-basic-multiple" multiple="multiple" id="tissuename"></select>
                            </td>
                        </tr>

                    </table>

                </div>
            </div>
        </div>
        <div class="col-lg-12 col-md-12" >
            <div class="mypanel">
                <div class="mypanel-body">
                    <div class="Browser"  style="margin-top: 10px;z-index: 997;padding: 40px 40px 0 40px">
                        <table id="table-marker" class="table table-striped table-hover" style="width: 100%">
                            <thead>
                            <tr>
                                <th>Condition</th>
                                <th>Disease ID</th>
                                <th>Cell Taxonomy ID</th>
                                <th>Cell type</th>
                                <th>Cell Ontology ID</th>
                                <th>Tissue</th>
                                <th>Tissue ID</th>
                            </tr>
                            </thead>
                            <tbody>
                            </tbody>

                        </table>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    function getoptions(url,title,id,database,diseasename,celltypename,tissuename,tissue,disease,celltype){
        $("#"+id).select2({
            ajax: {
                url: "/celltaxonomy"+url,
                dataType: 'json',
                type: "post",
                data:function(params){
                    var search={
                        term:params.term,
                        title:title,
                        database:database,
                        diseasename:diseasename,
                        celltypename:celltypename,
                        tissuename:tissuename,
                        tissue:tissue,
                        celltype:celltype,
                        disease:disease
                    }
                    return search
                },
                processResults: function (data) {
                    var res = data.map(function (item) {
                        return {id: item[title],text:item[title]};
                    });
                    return {
                        results: res
                    };
                }
            }


        });
    };

    $(document).ready(function(){
        $.ajax({
            url: '/celltaxonomy/getcondition',
            type: 'post',
            success:function(results){
                $("#table-marker").DataTable(   {
                    data:results,
                    columns:[
                        {
                            data:"Conditions",
                        },
                        {
                            data:"Disease_Ontology_ID",
                            render:function(data,type,row){
                                if(row.Disease_Ontology_ID.indexOf("DOID:")>=0){
                                    return "<a style='color: #2c75c9;text-decoration: none' target='_blank' href='https://www.ebi.ac.uk/ols/ontologies/doid/terms?iri=http%3A%2F%2Fpurl.obolibrary.org%2Fobo%2F"+row.Disease_Ontology_ID.replace(/:/,"_")+"'>"+row.Disease_Ontology_ID+"</a>"
                                }
                                else{
                                    return "-"
                                }
                            }
                        },
                        {
                            data:"CT_ID",
                            render:function(data,type,row){
                                if(row.CT_ID!="-"){
                                    return "<a style='color: #2c75c9;text-decoration: none' target='_blank' href='/celltaxonomy/celltype/"+row.CT_ID+"'>"+row.CT_ID+"</a>"
                                }
                                else{
                                    return row.CT_ID
                                }
                            }

                        },
                        {
                            data:"Cell_standard",
                            render:function(data,type,row){
                                if(row.CT_ID!="-"){
                                    return "<a style='color: #2c75c9;text-decoration: none' target='_blank' href='/celltaxonomy/celltype/"+row.CT_ID+"'>"+row.Cell_standard+"</a>"
                                }
                                else{
                                    return row.CT_ID
                                }
                            }
                        },
                        {
                            data:"Specific_Cell_Ontology_ID",
                            render:function(data,type,row){
                                if(row.Specific_Cell_Ontology_ID.indexOf("-")<0){
                                    return "<a target='_blank' href='https://www.ebi.ac.uk/ols/ontologies/cl/terms?iri=http%3A%2F%2Fpurl.obolibrary.org%2Fobo%2F"+row.Specific_Cell_Ontology_ID.replace(/:/,"_")+"' class='cellontology'>"+row.Specific_Cell_Ontology_ID+"</a>"
                                }
                                else{
                                    return row.Specific_Cell_Ontology_ID
                                }
                            }
                        },
                        {
                            data:"Tissue_standard",
                            render:function(data,type,row){
                                if(data=="-"){
                                    return data
                                }
                                else{
                                    return "<a target='_blank' href='/celltaxonomy/tissue/"+row.Tissue_UberonOntology_ID+"'>"+row.Tissue_standard+"</a>"
                                }
                            }
                        },
                        {
                            data:"Tissue_UberonOntology_ID",
                            render:function(data,type,row){
                                if (data.indexOf("UBERON:")<0){
                                    return "-"
                                }
                                else{
                                    return "<a target='_blank' href='https://www.ebi.ac.uk/ols/ontologies/uberon/terms?iri=http%3A%2F%2Fpurl.obolibrary.org%2Fobo%2F"+row.Tissue_UberonOntology_ID.replace(/:/,"_")+"'>"+row.Tissue_UberonOntology_ID+"</a>"
                                }
                            }
                        }
                    ],

                    destroy: true,
                    order:[1,"desc"],
                    dom: '<"row"<"col-lg-4"l><"col-lg-4"B><"col-lg-4"f>>t<"row"<"col-lg-6"i><"col-lg-6"p>>',
                    buttons: [
                        'excel'
                    ]

                });

            }
        })
        $.ajax({
            url: '/celltaxonomy/getconditionlist',
            type: 'post',
            success:function(results){
                var n=0;
                results.map(function(d){
                    n=n+1;
                    if(n>20){
                        $("#diseasename").append("<li  style='margin-right:10px;display: none'><a class='condition more'>"+d["Conditions"]+" ("+d["counts"]+")</a></li>")

                    }
                    else{
                        $("#diseasename").append("<li  style='margin-right:10px;display: inline-block'><a class='condition'>"+d["Conditions"]+" ("+d["counts"]+")</a></li>")
                    }
                })
            }
        })

        getoptions("/tissue_list","Tissue_Standard","tissuename","ct.condition_page");
        getoptions("/celltype_list","Cell_standard","celltypename","ct.condition_page");
        // getoptions("/disease_list","Conditions","diseasename","ct.condition_page");
    });
    $(".js-example-basic-multiple").change(function(){

        var diseasename=$(".condition.active").text().replace(/\(\d+\)/g,"\t").split("\t");
        diseasename.pop()
        var tissuename=$("#tissuename").val();
        var celltypename=$("#celltypename").val();
        $.ajax({
            url: '/celltaxonomy/getconditionlist',
            type: 'post',
            data:{
                'tissue':JSON.stringify(tissuename),
                'celltype':JSON.stringify(celltypename)
            },
            success:function(results){
                var species=results.map(function(d){
                    return d["Conditions"]
                })
                $(".condition").each(function(){
                    $(this).css("pointer-events","auto")
                    if($(this).hasClass("active")){
                        $(this).css("color","white")
                    }
                    else{
                        $(this).css("color","#2C75C9")
                    }
                    if(species.indexOf($(this).text().split("(")[0])<0){

                        $(this).css("pointer-events","none")
                        $(this).css("color","grey")
                    }
                })
            }
        })

        if(diseasename.length!=0){
            var diseasename2=diseasename.toString()
        }
        if(tissuename!=null){
            var tissuename2=tissuename.toString()
        }

        if(celltypename!=null){
            var celltypename2=celltypename.toString()
        }
        getoptions("/tissue_list","Tissue_Standard","tissuename","ct.condition_page",diseasename2,celltypename2,tissuename2,"Tissue_Standard","Conditions","Cell_standard");
        // getoptions("/disease_list","Conditions","diseasename","ct.condition_page",celltypename2,diseasename2,tissuename2,"Tissue_Standard","Conditions","Cell_standard");
        getoptions("/celltype_list","Cell_standard","celltypename","ct.condition_page",diseasename2,celltypename2,tissuename2,"Tissue_Standard","Conditions","Cell_standard");

        if(diseasename.length==0 && tissuename==null && celltypename==null){
            $.ajax({
                url: '/celltaxonomy/getcondition',
                type: 'post',
                success:function(results){
                    $("#table-marker").DataTable(   {
                        data:results,
                        columns:[
                            {
                                data:"Conditions",
                            },
                            {
                                data:"Disease_Ontology_ID",
                                render:function(data,type,row){
                                    if(row.Disease_Ontology_ID.indexOf("DOID:")>=0){
                                        return "<a style='color: #2c75c9;text-decoration: none' target='_blank' href='https://www.ebi.ac.uk/ols/ontologies/doid/terms?iri=http%3A%2F%2Fpurl.obolibrary.org%2Fobo%2F"+row.Disease_Ontology_ID.replace(/:/,"_")+"'>"+row.Disease_Ontology_ID+"</a>"
                                    }
                                    else{
                                        return row.Disease_Ontology_ID
                                    }
                                }
                            },
                            {
                                data:"CT_ID",
                                render:function(data,type,row){
                                    if(row.CT_ID!="-"){
                                        return "<a style='color: #2c75c9;text-decoration: none' target='_blank' href='/celltaxonomy/celltype/"+row.CT_ID+"'>"+row.CT_ID+"</a>"
                                    }
                                    else{
                                        return row.CT_ID
                                    }
                                }

                            },
                            {
                                data:"Cell_standard",
                                render:function(data,type,row){
                                    if(row.CT_ID!="-"){
                                        return "<a style='color: #2c75c9;text-decoration: none' target='_blank' href='/celltaxonomy/celltype/"+row.CT_ID+"'>"+row.Cell_standard+"</a>"
                                    }
                                    else{
                                        return row.CT_ID
                                    }
                                }
                            },
                            {
                                data:"Specific_Cell_Ontology_ID",
                                render:function(data,type,row){
                                    if(row.Specific_Cell_Ontology_ID.indexOf("-")<0){
                                        return "<a target='_blank' href='https://www.ebi.ac.uk/ols/ontologies/cl/terms?iri=http%3A%2F%2Fpurl.obolibrary.org%2Fobo%2F"+row.Specific_Cell_Ontology_ID.replace(/:/,"_")+"' class='cellontology'>"+row.Specific_Cell_Ontology_ID+"</a>"
                                    }
                                    else{
                                        return row.Specific_Cell_Ontology_ID
                                    }
                                }
                            },
                            {
                                data:"Tissue_standard",
                                render:function(data,type,row){
                                    if(data=="-"){
                                        return data
                                    }
                                    else{
                                        return "<a target='_blank' href='/celltaxonomy/tissue/"+row.Tissue_UberonOntology_ID+"'>"+row.Tissue_standard+"</a>"
                                    }
                                }
                            },
                            {
                                data:"Tissue_UberonOntology_ID",
                                render:function(data,type,row){
                                    if (data.indexOf("UBERON:")<0){
                                        return "-"
                                    }
                                    else{
                                        return "<a target='_blank' href='https://www.ebi.ac.uk/ols/ontologies/uberon/terms?iri=http%3A%2F%2Fpurl.obolibrary.org%2Fobo%2F"+row.Tissue_UberonOntology_ID.replace(/:/,"_")+"'>"+row.Tissue_UberonOntology_ID+"</a>"
                                    }
                                }
                            }
                        ],

                        destroy: true,
                        order:[5,"desc"],
                        dom: '<"row"<"col-lg-4"l><"col-lg-4"B><"col-lg-4"f>>t<"row"<"col-lg-6"i><"col-lg-6"p>>',
                        buttons: [
                            'excel'
                        ]

                    });

                }
            })
        }
        else{
            if(diseasename.length==0){
                diseasename=null
            }
            $.ajax({
                url: '/celltaxonomy/getcondition',
                type: 'post',
                data: {
                    "condition": JSON.stringify(diseasename),
                    "tissue": JSON.stringify(tissuename),
                    "celltype": JSON.stringify(celltypename),
                },
                success:function(results){
                    $("#table-marker").DataTable(   {
                        data:results,
                        columns:[
                            {
                                data:"Conditions",
                            },
                            {
                                data:"Disease_Ontology_ID",
                                render:function(data,type,row){
                                    if(row.Disease_Ontology_ID.indexOf("DOID:")>=0){
                                        return "<a style='color: #2c75c9;text-decoration: none' target='_blank' href='https://www.ebi.ac.uk/ols/ontologies/doid/terms?iri=http%3A%2F%2Fpurl.obolibrary.org%2Fobo%2F"+row.Disease_Ontology_ID.replace(/:/,"_")+"'>"+row.Disease_Ontology_ID+"</a>"
                                    }
                                    else{
                                        return row.Disease_Ontology_ID
                                    }
                                }
                            },
                            {
                                data:"CT_ID",
                                render:function(data,type,row){
                                    if(row.CT_ID!="-"){
                                        return "<a style='color: #2c75c9;text-decoration: none' target='_blank' href='/celltaxonomy/celltype/"+row.CT_ID+"'>"+row.CT_ID+"</a>"
                                    }
                                    else{
                                        return row.CT_ID
                                    }
                                }

                            },
                            {
                                data:"Cell_standard",
                                render:function(data,type,row){
                                    if(row.CT_ID!="-"){
                                        return "<a style='color: #2c75c9;text-decoration: none' target='_blank' href='/celltaxonomy/celltype/"+row.CT_ID+"'>"+row.Cell_standard+"</a>"
                                    }
                                    else{
                                        return row.CT_ID
                                    }
                                }
                            },
                            {
                                data:"Specific_Cell_Ontology_ID",
                                render:function(data,type,row){
                                    if(row.Specific_Cell_Ontology_ID.indexOf("-")<0){
                                        return "<a target='_blank' href='https://www.ebi.ac.uk/ols/ontologies/cl/terms?iri=http%3A%2F%2Fpurl.obolibrary.org%2Fobo%2F"+row.Specific_Cell_Ontology_ID.replace(/:/,"_")+"' class='cellontology'>"+row.Specific_Cell_Ontology_ID+"</a>"
                                    }
                                    else{
                                        return row.Specific_Cell_Ontology_ID
                                    }
                                }
                            },
                            {
                                data:"Tissue_standard",
                                render:function(data,type,row){
                                    if(data=="-"){
                                        return data
                                    }
                                    else{
                                        return "<a target='_blank' href='/celltaxonomy/tissue/"+row.Tissue_UberonOntology_ID+"'>"+row.Tissue_standard+"</a>"
                                    }
                                }
                            },
                            {
                                data:"Tissue_UberonOntology_ID",
                                render:function(data,type,row){
                                    if (data.indexOf("UBERON:")<0){
                                        return "-"
                                    }
                                    else{
                                        return "<a target='_blank' href='https://www.ebi.ac.uk/ols/ontologies/uberon/terms?iri=http%3A%2F%2Fpurl.obolibrary.org%2Fobo%2F"+row.Tissue_UberonOntology_ID.replace(/:/,"_")+"'>"+row.Tissue_UberonOntology_ID+"</a>"
                                    }
                                }
                            }
                        ],

                        destroy: true,
                        order:[5,"desc"],
                        dom: '<"row"<"col-lg-4"l><"col-lg-4"B><"col-lg-4"f>>t<"row"<"col-lg-6"i><"col-lg-6"p>>',
                        buttons: [
                            'excel'
                        ]

                    });

                }
            })



        }
    });
    function post(URL,params) {
        var temp_form = document.createElement("form");
        temp_form .action = "/celltaxonomy"+URL;
        temp_form .target = "_blank";
        temp_form .method = "post";
        temp_form .style.display = "none";
        for (var x in params){
            var opt = document.createElement("textarea");
            opt.name = x;
            opt.value = params[x];
            temp_form .appendChild(opt);
        }


        document.body.appendChild(temp_form);
        temp_form .submit();
    };
    $("#diseasename").on("click",".condition",function(){
        if($(this).hasClass("active")){
            $(this).removeClass("active")
            $(this).css("color","#2C75C9")

        }
        else{
            $(this).addClass("active")
            $(this).css("color","white")

        }

        var speciess=$(".condition.active").text().replace(/\(\d+\)/g,"\t").split("\t")
        speciess.pop()
        var tissuename=$("#tissuename").val();
        var celltypename=$("#celltypename").val();

        if(speciess!=null){
            var speciess2=speciess.toString()
        }
        if(tissuename!=null){
            var tissuename2=tissuename.toString()
        }

        if(celltypename!=null){
            var celltypename2=celltypename.toString()
        }

        getoptions("/tissue_list","Tissue_Standard","tissuename","ct.marker_browse_statistics as a inner join ct.all_search_table as b on a.Cell_Marker=b.Cell_Marker",speciess2,celltypename2,tissuename2,"Tissue_Standard","Disease_Type","Cell_standard");
        // getoptions("/species_list","Species","speciess","ct.marker_browse_statistics as a inner join ct.all_search_table as b on a.Cell_Marker=b.Cell_Marker",speciess2,celltypename2,tissuename2,"Tissue_Standard","Cell_standard");
        getoptions("/celltype_list","Cell_standard","celltypename","ct.marker_browse_statistics as a inner join ct.all_search_table as b on a.Cell_Marker=b.Cell_Marker",speciess2,celltypename2,tissuename2,"Tissue_Standard","Disease_Type","Cell_standard");



        if(speciess.length!=0){
            $.ajax({
                url: '/celltaxonomy/getcondition',
                type: 'post',
                data: {
                    "condition": JSON.stringify(speciess),
                    "tissue": JSON.stringify(tissuename),
                    "celltype": JSON.stringify(celltypename),
                },
                success:function(results){
                    $("#table-marker").DataTable(   {
                        data:results,
                        columns:[
                            {
                                data:"Conditions",
                            },
                            {
                                data:"Disease_Ontology_ID",
                                render:function(data,type,row){
                                    if(row.Disease_Ontology_ID.indexOf("DOID:")>0){
                                        return "<a style='color: #2c75c9;text-decoration: none' target='_blank' href='https://www.ebi.ac.uk/ols/ontologies/doid/terms?iri=http%3A%2F%2Fpurl.obolibrary.org%2Fobo%2F"+row.Disease_Ontology_ID.replace(/:/,"_")+"'>"+row.Disease_Ontology_ID+"</a>"
                                    }
                                    else{
                                        return row.Disease_Ontology_ID
                                    }
                                }
                            },
                            {
                                data:"CT_ID",
                                render:function(data,type,row){
                                    if(row.CT_ID!="-"){
                                        return "<a style='color: #2c75c9;text-decoration: none' target='_blank' href='/celltaxonomy/celltype/"+row.CT_ID+"'>"+row.CT_ID+"</a>"
                                    }
                                    else{
                                        return row.CT_ID
                                    }
                                }

                            },
                            {
                                data:"Cell_standard",
                                render:function(data,type,row){
                                    if(row.CT_ID!="-"){
                                        return "<a style='color: #2c75c9;text-decoration: none' target='_blank' href='/celltaxonomy/celltype/"+row.CT_ID+"'>"+row.Cell_standard+"</a>"
                                    }
                                    else{
                                        return row.CT_ID
                                    }
                                }
                            },
                            {
                                data:"Specific_Cell_Ontology_ID",
                                render:function(data,type,row){
                                    if(row.Specific_Cell_Ontology_ID.indexOf("-")<0){
                                        return "<a target='_blank' href='https://www.ebi.ac.uk/ols/ontologies/cl/terms?iri=http%3A%2F%2Fpurl.obolibrary.org%2Fobo%2F"+row.Specific_Cell_Ontology_ID.replace(/:/,"_")+"' class='cellontology'>"+row.Specific_Cell_Ontology_ID+"</a>"
                                    }
                                    else{
                                        return row.Specific_Cell_Ontology_ID
                                    }
                                }
                            },
                            {
                                data:"Tissue_standard",
                                render:function(data,type,row){
                                    if(data=="-"){
                                        return data
                                    }
                                    else{
                                        return "<a target='_blank' href='/celltaxonomy/tissue/"+row.Tissue_UberonOntology_ID+"'>"+row.Tissue_standard+"</a>"
                                    }
                                }
                            },
                            {
                                data:"Tissue_UberonOntology_ID",
                                render:function(data,type,row){
                                    if (data.indexOf("UBERON:")<0){
                                        return "-"
                                    }
                                    else{
                                        return "<a target='_blank' href='https://www.ebi.ac.uk/ols/ontologies/uberon/terms?iri=http%3A%2F%2Fpurl.obolibrary.org%2Fobo%2F"+row.Tissue_UberonOntology_ID.replace(/:/,"_")+"'>"+row.Tissue_UberonOntology_ID+"</a>"
                                    }
                                }
                            }
                        ],

                        destroy: true,
                        order:[1,"desc"],
                        dom: '<"row"<"col-lg-4"l><"col-lg-4"B><"col-lg-4"f>>t<"row"<"col-lg-6"i><"col-lg-6"p>>',
                        buttons: [
                            'excel'
                        ]

                    });

                }
            })
        }
        else if(tissuename==null && celltypename==null){
            $.ajax({
                url: '/celltaxonomy/getcondition',
                type: 'post',
                success:function(results){
                    $("#table-marker").DataTable(   {
                        data:results,
                        columns:[
                            {
                                data:"Conditions",
                            },
                            {
                                data:"Disease_Ontology_ID",
                                render:function(data,type,row){
                                    if(row.Disease_Ontology_ID.indexOf("DOID:")>=0){
                                        return "<a style='color: #2c75c9;text-decoration: none' target='_blank' href='https://www.ebi.ac.uk/ols/ontologies/doid/terms?iri=http%3A%2F%2Fpurl.obolibrary.org%2Fobo%2F"+row.Disease_Ontology_ID.replace(/:/,"_")+"'>"+row.Disease_Ontology_ID+"</a>"
                                    }
                                    else{
                                        return row.Disease_Ontology_ID
                                    }
                                }
                            },
                            {
                                data:"CT_ID",
                                render:function(data,type,row){
                                    if(row.CT_ID!="-"){
                                        return "<a style='color: #2c75c9;text-decoration: none' target='_blank' href='/celltaxonomy/celltype/"+row.CT_ID+"'>"+row.CT_ID+"</a>"
                                    }
                                    else{
                                        return row.CT_ID
                                    }
                                }

                            },
                            {
                                data:"Cell_standard",
                                render:function(data,type,row){
                                    if(row.CT_ID!="-"){
                                        return "<a style='color: #2c75c9;text-decoration: none' target='_blank' href='/celltaxonomy/celltype/"+row.CT_ID+"'>"+row.Cell_standard+"</a>"
                                    }
                                    else{
                                        return row.CT_ID
                                    }
                                }
                            },
                            {
                                data:"Specific_Cell_Ontology_ID",
                                render:function(data,type,row){
                                    if(row.Specific_Cell_Ontology_ID.indexOf("-")<0){
                                        return "<a target='_blank' href='https://www.ebi.ac.uk/ols/ontologies/cl/terms?iri=http%3A%2F%2Fpurl.obolibrary.org%2Fobo%2F"+row.Specific_Cell_Ontology_ID.replace(/:/,"_")+"' class='cellontology'>"+row.Specific_Cell_Ontology_ID+"</a>"
                                    }
                                    else{
                                        return row.Specific_Cell_Ontology_ID
                                    }
                                }
                            },
                            {
                                data:"Tissue_standard",
                                render:function(data,type,row){
                                    if(data=="-"){
                                        return data
                                    }
                                    else{
                                        return "<a target='_blank' href='/celltaxonomy/tissue/"+row.Tissue_UberonOntology_ID+"'>"+row.Tissue_standard+"</a>"
                                    }
                                }
                            },
                            {
                                data:"Tissue_UberonOntology_ID",
                                render:function(data,type,row){
                                    if (data.indexOf("UBERON:")<0){
                                        return "-"
                                    }
                                    else{
                                        return "<a target='_blank' href='https://www.ebi.ac.uk/ols/ontologies/uberon/terms?iri=http%3A%2F%2Fpurl.obolibrary.org%2Fobo%2F"+row.Tissue_UberonOntology_ID.replace(/:/,"_")+"'>"+row.Tissue_UberonOntology_ID+"</a>"
                                    }
                                }
                            }
                        ],

                        destroy: true,
                        order:[1,"desc"],
                        dom: '<"row"<"col-lg-4"l><"col-lg-4"B><"col-lg-4"f>>t<"row"<"col-lg-6"i><"col-lg-6"p>>',
                        buttons: [
                            'excel'
                        ]

                    });

                }
            })
        }
        else{
            speciess=null
            $.ajax({
                url: '/celltaxonomy/getcondition',
                type: 'post',
                data: {
                    "condition": JSON.stringify(speciess),
                    "tissue": JSON.stringify(tissuename),
                    "celltype": JSON.stringify(celltypename),
                },
                success:function(results){
                    $("#table-marker").DataTable(   {
                        data:results,
                        columns:[
                            {
                                data:"Conditions",
                            },
                            {
                                data:"Disease_Ontology_ID",
                                render:function(data,type,row){
                                    if(row.Disease_Ontology_ID.indexOf("DOID:")>=0){
                                        return "<a style='color: #2c75c9;text-decoration: none' target='_blank' href='https://www.ebi.ac.uk/ols/ontologies/doid/terms?iri=http%3A%2F%2Fpurl.obolibrary.org%2Fobo%2F"+row.Disease_Ontology_ID.replace(/:/,"_")+"'>"+row.Disease_Ontology_ID+"</a>"
                                    }
                                    else{
                                        return row.Disease_Ontology_ID
                                    }
                                }
                            },
                            {
                                data:"CT_ID",
                                render:function(data,type,row){
                                    if(row.CT_ID!="-"){
                                        return "<a style='color: #2c75c9;text-decoration: none' target='_blank' href='/celltaxonomy/celltype/"+row.CT_ID+"'>"+row.CT_ID+"</a>"
                                    }
                                    else{
                                        return row.CT_ID
                                    }
                                }

                            },
                            {
                                data:"Cell_standard",
                                render:function(data,type,row){
                                    if(row.CT_ID!="-"){
                                        return "<a style='color: #2c75c9;text-decoration: none' target='_blank' href='/celltaxonomy/celltype/"+row.CT_ID+"'>"+row.Cell_standard+"</a>"
                                    }
                                    else{
                                        return row.CT_ID
                                    }
                                }
                            },
                            {
                                data:"Specific_Cell_Ontology_ID",
                                render:function(data,type,row){
                                    if(row.Specific_Cell_Ontology_ID.indexOf("-")<0){
                                        return "<a target='_blank' href='https://www.ebi.ac.uk/ols/ontologies/cl/terms?iri=http%3A%2F%2Fpurl.obolibrary.org%2Fobo%2F"+row.Specific_Cell_Ontology_ID.replace(/:/,"_")+"' class='cellontology'>"+row.Specific_Cell_Ontology_ID+"</a>"
                                    }
                                    else{
                                        return row.Specific_Cell_Ontology_ID
                                    }
                                }
                            },
                            {
                                data:"Tissue_standard",
                                render:function(data,type,row){
                                    if(data=="-"){
                                        return data
                                    }
                                    else{
                                        return "<a target='_blank' href='/celltaxonomy/tissue/"+row.Tissue_UberonOntology_ID+"'>"+row.Tissue_standard+"</a>"
                                    }
                                }
                            },
                            {
                                data:"Tissue_UberonOntology_ID",
                                render:function(data,type,row){
                                    if (data.indexOf("UBERON:")<0){
                                        return "-"
                                    }
                                    else{
                                        return "<a target='_blank' href='https://www.ebi.ac.uk/ols/ontologies/uberon/terms?iri=http%3A%2F%2Fpurl.obolibrary.org%2Fobo%2F"+row.Tissue_UberonOntology_ID.replace(/:/,"_")+"'>"+row.Tissue_UberonOntology_ID+"</a>"
                                    }
                                }
                            }
                        ],

                        destroy: true,
                        order:[1,"desc"],
                        dom: '<"row"<"col-lg-4"l><"col-lg-4"B><"col-lg-4"f>>t<"row"<"col-lg-6"i><"col-lg-6"p>>',
                        buttons: [
                            'excel'
                        ]

                    });

                }
            })
        }

    })
    $("#show").click(function(){
        if($(this).text()=="More"){
            $(this).text("Less");
            $(this).css("background","red");
            $(".more").parent().css("display","inline-block")
        }
        else{
            $(this).text("More");
            $(this).css("background","#337Ab7");
            $(".more").parent().css("display","none")
        }
    })
    if($(window).width()>1500){

    }
    else if($(window).width()>1000){
    }


</script>
</body>
</html>